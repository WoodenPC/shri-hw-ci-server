Разрешаю использовать свою работу для разбора

Если ты это читаешь, надеюсь у тебя установлен докер и докер компоуз, чтобы все работало :)

Если же нет, то гайд по установке есть тута https://docs.docker.com/install/

# Dev режим
`sudo docker-compose --file docker-compose.dev.yml up --build`

# Prod режим
`sudo docker-compose up --build`

Решил делать с помощью докера, чтобы не париться насчет того под какой системой будет работать этот сервер и не подгружать дополнительную либу для чтения файла с переменными окружения.

# env Файл
Файл с переменными окружения подгужается через docker-compose
пример есть в файлике env.example

# Работа сервера
сервес развернут на порту 3000, т.е. стучаться к нему можно к примеру через Insomnia GET localhost:3000/api/builds/list

Чтобы хранилище яндекса начало что то отдавать, надо сначала сохранить конфигурацию настроек POST localhost:3000/api/settings

При доступе к ручке POST /api/settings идет клонирование репозитория и дальнейшее слежение за ним, при обновлении все новые коммиты отправляются на сборку. Репозитории клонируются внутрь контейнера по пути /home/repos
 
Логи сборки кэшируются в файлики внутри контейнера по пути /home/logsCache, время жизни кэша поставил 1 минуту.
